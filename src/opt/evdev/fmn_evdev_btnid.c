#include "fmn_evdev_internal.h"

static const uint32_t fmn_evdev_key_usage[]={
  [KEY_ESC]=0x00070029,
  [KEY_1]=0x0007001e,
  [KEY_2]=0x0007001f,
  [KEY_3]=0x00070020,
  [KEY_4]=0x00070021,
  [KEY_5]=0x00070022,
  [KEY_6]=0x00070023,
  [KEY_7]=0x00070024,
  [KEY_8]=0x00070025,
  [KEY_9]=0x00070026,
  [KEY_0]=0x00070027,
  [KEY_MINUS]=0x0007002d,
  [KEY_EQUAL]=0x0007002e,
  [KEY_BACKSPACE]=0x0007002a,
  [KEY_TAB]=0x0007002b,
  [KEY_Q]=0x00070014,
  [KEY_W]=0x0007001a,
  [KEY_E]=0x00070008,
  [KEY_R]=0x00070015,
  [KEY_T]=0x00070017,
  [KEY_Y]=0x0007001c,
  [KEY_U]=0x00070018,
  [KEY_I]=0x0007000c,
  [KEY_O]=0x00070012,
  [KEY_P]=0x00070013,
  [KEY_LEFTBRACE]=0x0007002f,
  [KEY_RIGHTBRACE]=0x00070030,
  [KEY_ENTER]=0x00070028,
  [KEY_LEFTCTRL]=0x000700e0,
  [KEY_A]=0x00070004,
  [KEY_S]=0x00070016,
  [KEY_D]=0x00070007,
  [KEY_F]=0x00070009,
  [KEY_G]=0x0007000a,
  [KEY_H]=0x0007000b,
  [KEY_J]=0x0007000d,
  [KEY_K]=0x0007000e,
  [KEY_L]=0x0007000f,
  [KEY_SEMICOLON]=0x00070033,
  [KEY_APOSTROPHE]=0x00070034,
  [KEY_GRAVE]=0x00070035,
  [KEY_LEFTSHIFT]=0x000700e1,
  [KEY_BACKSLASH]=0x00070031,
  [KEY_Z]=0x0007001d,
  [KEY_X]=0x0007001b,
  [KEY_C]=0x00070006,
  [KEY_V]=0x00070019,
  [KEY_B]=0x00070005,
  [KEY_N]=0x00070011,
  [KEY_M]=0x00070010,
  [KEY_COMMA]=0x00070036,
  [KEY_DOT]=0x00070037,
  [KEY_SLASH]=0x00070038,
  [KEY_RIGHTSHIFT]=0x000700e5,
  [KEY_KPASTERISK]=0x00070055,
  [KEY_LEFTALT]=0x000700e2,
  [KEY_SPACE]=0x0007002c,
  [KEY_CAPSLOCK]=0x00070039,
  [KEY_F1]=0x0007003a,
  [KEY_F2]=0x0007003b,
  [KEY_F3]=0x0007003c,
  [KEY_F4]=0x0007003d,
  [KEY_F5]=0x0007003e,
  [KEY_F6]=0x0007003f,
  [KEY_F7]=0x00070040,
  [KEY_F8]=0x00070041,
  [KEY_F9]=0x00070042,
  [KEY_F10]=0x00070043,
  [KEY_NUMLOCK]=0x00070053,
  [KEY_SCROLLLOCK]=0x00070047,
  [KEY_KP7]=0x0007005f,
  [KEY_KP8]=0x00070060,
  [KEY_KP9]=0x00070061,
  [KEY_KPMINUS]=0x00070056,
  [KEY_KP4]=0x0007005c,
  [KEY_KP5]=0x0007005d,
  [KEY_KP6]=0x0007005e,
  [KEY_KPPLUS]=0x00070057,
  [KEY_KP1]=0x00070059,
  [KEY_KP2]=0x0007005a,
  [KEY_KP3]=0x0007005b,
  [KEY_KP0]=0x00070062,
  [KEY_KPDOT]=0x00070063,
  [KEY_F11]=0x00070044,
  [KEY_F12]=0x00070045,
  [KEY_KPENTER]=0x00070058,
  [KEY_RIGHTCTRL]=0x000700e4,
  [KEY_KPSLASH]=0x00070054,
  [KEY_RIGHTALT]=0x000700e6,
  [KEY_HOME]=0x0007004a,
  [KEY_UP]=0x00070052,
  [KEY_PAGEUP]=0x0007004b,
  [KEY_LEFT]=0x00070050,
  [KEY_RIGHT]=0x0007004f,
  [KEY_END]=0x0007004d,
  [KEY_DOWN]=0x00070051,
  [KEY_PAGEDOWN]=0x0007004e,
  [KEY_INSERT]=0x00070049,
  [KEY_DELETE]=0x0007004c,
  [BTN_0]=0x00090001,
  [BTN_1]=0x00090002,
  [BTN_2]=0x00090003,
  [BTN_3]=0x00090004,
  [BTN_4]=0x00090005,
  [BTN_5]=0x00090006,
  [BTN_6]=0x00090007,
  [BTN_7]=0x00090008,
  [BTN_8]=0x00090009,
  [BTN_9]=0x0009000a,
  [BTN_TRIGGER]=0x0009000b,
  [BTN_THUMB]=0x0009000c,
  [BTN_THUMB2]=0x0009000d,
  [BTN_TOP]=0x0009000e,
  [BTN_TOP2]=0x0009000f,
  [BTN_PINKIE]=0x00090010,
  [BTN_BASE]=0x00090011,
  [BTN_BASE2]=0x00090012,
  [BTN_BASE3]=0x00090013,
  [BTN_BASE4]=0x00090014,
  [BTN_BASE5]=0x00090015,
  [BTN_BASE6]=0x00090016,
  [BTN_DEAD]=0x00090017,
  [BTN_SOUTH]=0x00050037,
  [BTN_EAST]=0x00050037,
  [BTN_C]=0x00050039,
  [BTN_NORTH]=0x00050037,
  [BTN_WEST]=0x00050037,
  [BTN_Z]=0x00050039,
  [BTN_TL]=0x00050039,
  [BTN_TR]=0x00050039,
  [BTN_TL2]=0x00050039,
  [BTN_TR2]=0x00050039,
  [BTN_SELECT]=0x0001003e,
  [BTN_START]=0x0001003d,
  [BTN_THUMBL]=0x00090018,
  [BTN_THUMBR]=0x00090019,
};

static const uint32_t fmn_evdev_abs_usage[]={
  [ABS_X]=0x00010030,
  [ABS_Y]=0x00010031,
  [ABS_Z]=0x00010032,
  [ABS_RX]=0x00010033,
  [ABS_RY]=0x00010034,
  [ABS_RZ]=0x00010035,
  [ABS_HAT0X]=0x00010030,
  [ABS_HAT0Y]=0x00010031,
  [ABS_HAT1X]=0x00010030,
  [ABS_HAT1Y]=0x00010031,
  [ABS_HAT2X]=0x00010030,
  [ABS_HAT2Y]=0x00010031,
  [ABS_HAT3X]=0x00010030,
  [ABS_HAT3Y]=0x00010031,
};

int fmn_evdev_usage_from_code(uint8_t type,uint16_t code) {
  const uint32_t *src=0;
  int srcc=0;
  switch (type) {
    case EV_KEY: src=fmn_evdev_key_usage; srcc=sizeof(fmn_evdev_key_usage)/sizeof(uint32_t); break;
    case EV_ABS: src=fmn_evdev_abs_usage; srcc=sizeof(fmn_evdev_abs_usage)/sizeof(uint32_t); break;
  }
  if (code>=srcc) return 0;
  return src[code];
}
